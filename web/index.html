<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta id="viewport" name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=no;" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />
    <title>TallyBook2</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>

<div class="wrapper">
    <div class="container">
        <div id="billListToolbar" class="toolbar" cmd="void">
            <input id="dateInput" type="date" required pattern="\d{4}-\d{2}-\d{2}" placeholder="2012-12-20"/><input type="button" value="New" cmd="createBill"/>
        </div>
        <div id="billListContainer" class="bill-list-container">
            <ul id="billList" class="bill-list" cmd="void"></ul>
        </div>
    </div>
    <div id="globalMasker" class="global-masker"></div>
    <div id="billFormContainer" class="bill-form-container">
    </div>
    <div id="globalLoading" class="global-loading"></div>
</div>

<script id="billFormTmpl" type="text/plain">
    <form class="bill-form" cmd="void" action="">
            <div class="titlebar">New</div>
            <div class="body">
                <div class="date">
                    <span class="sign">@</span><input id="billFormDate" type="date" required pattern="\\d{4}-\\d{2}-\\d{2}" placeholder="2012-12-20"/>
                </div>
                <div class="category">
                    <span class="label">Cate</span>
                    <span class="content">
                        <input id="billFormCateType" type="checkbox" class="checkbox">
                        <label for="billFormCateType"><span></span></label>
                        <select id="billFormCateIn" class="cate-in"></select>
                        <select id="billFormCateOut" class="cate-out"></select>
                        <input class="cate-new" type="button" value="New" cmd="newCategory">
                    </span>
                </div>
                <div class="money">
                    <span class="sign">￥</span><input id="billFormAmount" type="number" placeholder="0.00" min="0" required/>
                </div>
                <div class="tags"><span class="label">Tags</span><input /></div>
                <div class="remark"><span class="label">Desc</span><textarea id="billFormRemark" placeholder="some text" ></textarea></div>
            </div>
            <div class="toolbar">
                <input type="button" value="Cancel" cmd="cancelBillForm"><input type="submit" value="Done" >
            </div>
        </form>
</script>

<script id="billItemTmpl" type="text/plain">
    <% 
        var bill;
        for(var l in list){ 
            bill = list[l];
    %>
        <li class="bill-item" id="bill-item-<%=bill.id%>">
            <div class="money">
                <span class="sign">￥</span>
                <span class="amount"><%=bill.amount%></span>
            </div>
            <div class="date">
                <span class="sign">@</span>
                <span class="occurred-time"><%=bill.occurredTime%></span>
            </div>
            <div class="category">
                <span class="label">Cate</span>
                <span class="content"><%=bill.cate.name%></span>
            </div>
            <% if(bill.tags.length){ %>
            <div class="tags"><span class="label">Tags</span>
                <% for(var t in bill.tags){ %>
                <span class="tags-item"><%=bill.tags[t].name%></span>
                <% } %>
            </div>
            <% } %>
            <% if(bill.remark){ %>
            <div class="remark">
                <span class="label">Desc</span>
                <span class="content"><%=bill.remark%></span>
            </div>
            <% } %>
        </li>
    <% } %>
</script>

<script id="cateListTmpl" type="text/plain">
<% for(var i in list){ 
    var cate = list[i];
%>
    <option value="<%=cate.id%>"><%=cate.name%></option>
<% if(cate.children.length){ 
        for(var j in cate.children){ 
            var child = cate.children[j];
%>
        <option parent="<%=child.parentId%>" value="<%=child.id%>">&nbsp;&nbsp;&nbsp;&nbsp;<%=child.name%></option>
<%      }
    } %>
<% 
} %>

</script>

<script src="../lib/jquery/jquery-1.6.4.js"></script>

<script src="js/ztool.all.js"></script>

<script src="js/tallybook.js"></script>
<script src="js/tallybook.config.js"></script>
<script src="js/tallybook.controller.js"></script>
<script src="js/tallybook.view.js"></script>
<script src="js/tallybook.model.js"></script>
<script src="js/tallybook.net.js"></script>
<script src="js/tallybook.util.js"></script>
<script src="js/tallybook.start.js"></script>

